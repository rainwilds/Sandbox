<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <link rel="preconnect" href="https://kit.fontawesome.com" crossorigin="anonymous">

    <link rel="preload" href="./JSON/setup.json" as="fetch" crossorigin="anonymous">
    <link rel="preload" href="./styles.css" as="style">    

    <script src="js/dependencies/chroma.min.cjs"></script>
    <script src="js/head-generator.js" type="module"></script>

    <data-custom-head
        data-components="custom-block"
        data-title="Colors"
        data-description="Color palette test page"
        data-canonical="https://rainwilds.github.io/Sandbox/color.html"
        >
    </data-custom-head>

    <style>
        .color-palette {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 1rem;
            padding: 1rem;
        }

        .color-swatch {
            padding: 1rem;
            border-radius: 8px;
            text-align: center;
            min-height: 100px;
            display: flex;
            flex-direction: column;
            justify-content: center;
            font-family: monospace;
            border: 1px solid rgba(0, 0, 0, 0.1);
        }

        .color-swatch span {
            margin: 0.25rem 0;
        }
    </style>

</head>

<body>

    <main>

        <section>

            <div>
                <custom-block
                    heading="Blocks"
                    text="Blocks auto-generated">
                </custom-block>
            </div>
        </section>

       

<section>
    <div class="grid-container-1">
        <!-- Block 1: Background Image with Centered Text and Button -->
        <custom-block
            heading="Explore Nature"
            heading-tag="h2"
            text="Discover breathtaking landscapes."
            button-text="Learn More"
            button-href="#nature"
            button-icon='<i class="fa-chisel fa-regular fa-leaf"></i>'
            button-icon-position="left"
            button-icon-offset="var(--space-tiny)"
            background-overlay="background-overlay-1"
            img-background-src="img/primary/tourism-photography-light-1.jpg"
            img-background-alt="Nature landscape background"
            img-background-position="center"
            img-background-mobile-width="100vw"
            img-background-tablet-width="80vw"
            img-background-desktop-width="1200px"
            text-alignment="center"
            inner-alignment="center"
            inner-class="padding-medium">
        </custom-block>

        <!-- Block 2: Video Background with Right-Aligned Content -->
        <custom-block
            heading="Adventure Awaits"
            heading-tag="h3"
            text="Thrilling adventures with video."
            button-text="Join Now"
            button-href="#adventure"
            button-icon='<i class="fa-chisel fa-regular fa-compass"></i>'
            button-icon-position="right"
            button-icon-offset="var(--space-tiny)"
            background-overlay="background-overlay-2"
            background-gradient="background-gradient-1"
            video-background-src="video/video1.mp4"
            video-background-poster="img/primary/tourism-photography-dark-1.jpg"
            video-background-alt="Adventure video background"
            video-background-autoplay
            video-background-muted
            video-background-loop
            text-alignment="right"
            inner-alignment="right"
            inner-shadow="shadow-medium"
            inner-class="padding-small">
        </custom-block>

      
</section>

        <section>
            <h2>Color Palette</h2>
            <div class="color-palette" id="color-palette"></div>
        </section>
    
    </main>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const root = document.documentElement;

            // Derive and set light primary opaque
            const lightPrimarySolid = getComputedStyle(root).getPropertyValue('--color-accent-light-primary').trim();
            const lightPrimaryDerived = chroma(lightPrimarySolid)
                .set('hsl.h', 311)
                .set('hsl.s', chroma(lightPrimarySolid).get('hsl.s') * 3.77)
                .set('hsl.l', chroma(lightPrimarySolid).get('hsl.l') * 0.51)
                .alpha(0.2)
                .css();
            root.style.setProperty('--color-accent-opaque-light-primary', lightPrimaryDerived);

            // Derive and set light secondary opaque
            const lightSecondarySolid = getComputedStyle(root).getPropertyValue('--color-accent-light-secondary').trim();
            const lightSecondaryDerived = chroma(lightSecondarySolid)
                .set('hsl.h', 301)
                .set('hsl.s', chroma(lightSecondarySolid).get('hsl.s') * 1.48)
                .set('hsl.l', chroma(lightSecondarySolid).get('hsl.l') * 0.86)
                .alpha(0.2)
                .css();
            root.style.setProperty('--color-accent-opaque-light-secondary', lightSecondaryDerived);

            // Derive and set dark primary opaque
            const darkPrimarySolid = getComputedStyle(root).getPropertyValue('--color-accent-dark-primary').trim();
            const darkPrimaryDerived = chroma(darkPrimarySolid)
                .set('hsl.h', 311)
                .set('hsl.s', chroma(darkPrimarySolid).get('hsl.s') * 3.76)
                .set('hsl.l', chroma(darkPrimarySolid).get('hsl.l') * 0.27)
                .alpha(0.5)
                .css();
            root.style.setProperty('--color-accent-opaque-dark-primary', darkPrimaryDerived);

            // Derive and set dark secondary opaque
            const darkSecondarySolid = getComputedStyle(root).getPropertyValue('--color-accent-dark-secondary').trim();
            const darkSecondaryDerived = chroma(darkSecondarySolid)
                .set('hsl.h', 311)
                .set('hsl.s', chroma(darkSecondarySolid).get('hsl.s') * 1.5)
                .set('hsl.l', chroma(darkSecondarySolid).get('hsl.l') * 0.25)
                .alpha(0.5)
                .css();
            root.style.setProperty('--color-accent-opaque-dark-secondary', darkSecondaryDerived);

            // Now generate swatches for all --color-* variables
            const styles = getComputedStyle(root);
            const colorVars = [];
            for (let i = 0; i < styles.length; i++) {
                const prop = styles[i];
                if (prop.startsWith('--color-')) {
                    colorVars.push(prop);
                }
            }

            const palette = document.getElementById('color-palette');
            colorVars.forEach(varName => {
                const value = styles.getPropertyValue(varName).trim();
                if (value) {  // Skip if empty
                    const div = document.createElement('div');
                    div.className = 'color-swatch';
                    div.style.backgroundColor = value;

                    const nameSpan = document.createElement('span');
                    nameSpan.textContent = varName;

                    const valueSpan = document.createElement('span');
                    valueSpan.textContent = value;

                    div.appendChild(nameSpan);
                    div.appendChild(valueSpan);

                    // Set text color based on luminance for readability
                    try {
                        const color = chroma(value);
                        const textColor = color.luminance() > 0.5 ? 'black' : 'white';
                        nameSpan.style.color = textColor;
                        valueSpan.style.color = textColor;
                    } catch (e) {
                        // If chroma can't parse (invalid color), default to black
                        nameSpan.style.color = 'black';
                        valueSpan.style.color = 'black';
                    }

                    palette.appendChild(div);
                }
            });
        });
    </script>
</body>
</html>