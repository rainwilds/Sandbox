<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <link rel="preload" href="./JSON/setup.json" as="fetch" crossorigin="anonymous">
    <link rel="preload" href="./styles.css" as="style">
    <link rel="preload" href="./custom.css" as="style">

    <script src="js/generators/head-generator.js" type="module"></script>

<style>
/* 1. THE REFINED ENGINE */
@function --shade(--color, --step) {
    /* Step 0 is base. Positive is Darker. Negative is Lighter. */
    result: oklch(from var(--color) calc(l - (var(--step) * 0.08)) c h);
}

/* 2. THE SEMANTIC VARIABLES */
:root {
    --_mint: #92c676;
    --_sky: #99cbe1;
    --_charcoal: #393632;
    --_bone: #f8f9fa;

    color-scheme: light dark;
    --color-primary: light-dark(var(--_mint), var(--_sky));
    --color-dark: light-dark(var(--_charcoal), #0a0a0a);
    --color-light: light-dark(#ffffff, var(--_bone));
}

/* 3. THE SWATCH LOGIC */
.swatch {
    padding: 1.5rem 1rem;
    border-radius: 12px;
    display: flex;
    flex-direction: column;
    gap: 0.5rem;
    font-size: 0.75rem;
    font-weight: bold;
    
    /* NATIVE BROWSER CONTRAST ENGINE */
    /* This looks at the background (currentcolor) and picks 
       the best contrast between your dark and light variables. */
    color: contrast-color(currentcolor max var(--color-dark), var(--color-light));
}

/* Step Assignments (using your requested integers) */
.step-neg-4 { background: --shade(var(--color-primary), -4); }
.step-neg-2 { background: --shade(var(--color-primary), -2); }
.step-zero  { background: var(--color-primary); outline: 2px solid var(--color-dark); }
.step-pos-2 { background: --shade(var(--color-primary), 2); }
.step-pos-4 { background: --shade(var(--color-primary), 4); }
</style>
</head>

<body>
<section class="palette-preview">
    <header>
        <h2 style="margin: 0;">Extended Linear Lightness Scale</h2>
        <p>A 9-step range from -4 (Lightest) to +4 (Darkest).</p>
    </header>

    <div class="grid">
        <div class="swatch step-neg-4">Step -4 <span>Pastel</span></div>
        <div class="swatch step-neg-3">Step -3 <span>Pale</span></div>
        <div class="swatch step-neg-2">Step -2 <span>Light</span></div>
        <div class="swatch step-neg-1">Step -1 <span>Soft</span></div>

        <div class="swatch step-zero">Step 0 <span>Base</span></div>

        <div class="swatch step-pos-1">Step 1 <span>Muted</span></div>
        <div class="swatch step-pos-2">Step 2 <span>Dark</span></div>
        <div class="swatch step-pos-3">Step 3 <span>Deep</span></div>
        <div class="swatch step-pos-4">Step 4 <span>Shadow</span></div>
    </div>
</section>
</body>